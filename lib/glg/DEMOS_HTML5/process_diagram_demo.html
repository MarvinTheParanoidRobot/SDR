<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>HTML5 & JavaScript: Process Flow Diagram Editor Web Demo</title>

    <link rel="icon" href="http://www.genlogic.com/favicon.ico"
          type="image/x-icon">
    <link rel="shortcut icon" href="http://www.genlogic.com/favicon.ico"
          type="image/x-icon"> 
    <link rel="stylesheet" href="demo.css">

    <script defer src="GlgDemo.js"></script>
    <script defer src="GlgToolkitDemo.js"></script>
    <script defer src="gunzip.min.js"></script>
    <script defer src="diagram_demo.js"></script>
    <script> var ProcessDiagram = true; </script>
  </head>

  <body>
    <p>
      <a href="http://www.genlogic.com">Home</a> |
      <a href="http://www.genlogic.com/demos.html">Demos</a> |
      <a href="http://www.genlogic.com/index.html#Products">Products</a>
    </p>

    <h4>GLG Process Flow Diagram Editor Web Demo (HTML5 & JavaScript)</h4>

    <p>This is an example of a <b>Process Flow Diagram (PFD) Editor
        written entirely in JavaScript</b> using the GLG Extended
      API. The PFD editor allows the user to create a process flow
      diagram by placing and connecting process equipment and
      attaching data sources for real-time updates. The flow diagram
      may be <b>updated with live data while it is being edited</b>.
      A saved diagram may be loaded into a simple Web viewer which displays
      the diagram and updates it with real-time data.<p>

    <p>The user interface and the dynamic icons of the PFD editor were built
      using the <b>GLG Graphics Builder</b>. The resulting drawing was saved
      into a file which is then loaded in a JavaScript program on a web page.
      The GLG API is used to handle user interaction with the drawing.</p>

    <p><b>Mobile Devices Note:</b> The process symbols in this demo use
      attachment points that are intended for the desktop use. For mobile
      devices with small screens, <b>simpler process symbols with a single
      attachment point in the center of a symbol</b> may be used, as shown in the
      <a href="diagram_demo.html">Diagram Demo</a>.</p>
    
    <button id="change_size" type="button" class="top_button"
            onclick="SetDrawingSize( true )">Change Drawing Size</button>
    <a href="diagram_demo.js" target="_blank" style="text-decoration: none;">
      <button type="button" class="top_button">Source Code</button>
    </a>

    <br><br>
    <div id="glg_area" class="glg_wrapper"
         style="width: 100%; height: 300px; background-color: white; 
                padding: 0px;"> 
    </div>
 
    <p>The <a href="http://www.genlogic.com/download.html">GLG Demo Download</a>
      contains the desktop versions of this demo implemented in C/C++/C# and
      Java that provide the same functionality as the JavaScript version.
      The drawing and the programming logic are shared between all versions
      of the demo with only syntax differences in the source code.
      <a href="#User_Interaction" >More information</a></p>
    
    <h4><a name="User_Interaction"></a>
      Description of Features and User Interaction </h4>

    <p> The Diagram Editor provides a sample implementation of the following
      features:</p>
    <ul>
      <li><a href="#Object_Palette">Object Palette</a></li>
      <li><a href="#Node_and_Edge_Objects">Custom Node and Edge Objects</a></li>
      <li><a href="#Modality">Modality</a></li>
      <li><a href="#Connectivity_Information">Connectivity Information</a></li>
      <li><a href="#Object_Selection_and_Editing">
          Object Selection and Editing</a></li>
      <li><a href="#Selection_Feedback">Selection Feedback</a></li>
      <li><a href="#Prompt_Area">Prompt Area</a></li>
      <li><a href="#Properties_Editing_and_Attaching_Custom_Data">
          Properties Editing and Attaching Custom Data</a></li>
      <li><a href="#Attaching_Data_Sources">Attaching Data Sources for
          Real-Time Updates</a></li>
      <li><a href="#Cut_and_Paste">Cut and Paste</a></li>
      <li><a href="#Zooming_Scrolling_and_ZoomTo_Features">
          Zooming, Scrolling and ZoomTo Features</a></li>
      <li><a href="#Tooltips">Integrated Tooltips</a></li>
      <li><a href="#Saving_the_Diagram">Saving the Diagram</a></li>
      <li><a href="#Loading_a_Diagram">
          Loading a Previously Saved Diagram</a></li>
      <li><a href="#Printing">Printing</a></li>
    </ul>


    <h4><a name="Object_Palette"></a>Object Palette</h4>

    <p>The Object Palette contains custom dynamic icons created in the
      GLG Graphics Builder. To create a diagram node, click on a desired node
      icon in the palette, then click in the drawing to position the node.
      The create a link between two nodes, click on a link icon, then click
      on two nodes in the drawing to be connected.</p>
    
    <h4><a name="Modality"></a>Modality</h4>

    <p>There are two modes for creating nodes and links. In the default creation 
      mode, the editing mode is restored to the <i>Selection</i> mode after
      creating each node or link. To create several nodes, the user has to
      click on a node icon each time before clicking in the drawing to position
      the node.</p>

    <p>The <i>Creation Mode</i> toolbar button toggles between the default 
      creation mode and the "sticky" creation mode.
    </p>

    <p>In the "sticky" mode, the creation mode stays active to allow the user
      to create several nodes or links in a row by repeatedly clicking in
      the drawing area, without a need to click on the node or link icon
      each time. To exit object creation mode, click on the <i>Select</i> icon
      in the <i>Object Palette</i> or disable the "sticky" mode using
      the <i>Creation Mode</i> toolbar button.</p>

    <h4><a name="Node_and_Edge_Objects"></a>Custom Node and Edge Objects</h4>

    <p>Two types of objects are available for creating a diagram: node objects
      and edge (connector) objects. To connect two nodes, select the edge type
      from the palette, then select two nodes in the drawing.
      Some nodes have more than one connection point; connection points are
      highlighed when the mouse moves over them.</p>

    <h4><a name="Connectivity_Information"></a>Connectivity Information</h4>

    <p>The demo uses custom data to keep track of what nodes are connected. 
      This may be used by an application for traversing connected nodes.
      The connectivity information is stored when the digram is saved and
      restored when the saved diagram is loaded.</p>

    <p>The flow diagram can be extended by <b>adding custom connectivity
        rules</b> and other application-specific features.
      <a href="http://www.genlogic.com/hmi_consulting.html#Custom_Process_Flow_Diagrams">More information</a><br><p>
    
    <h4><a name="Object_Selection_and_Editing"></a>
      Object Selection and Editing</h4>

    <p>The editing mode is activated by pressing the <i>Select</i> button in
      the <i>Object Palette</i>. In the editing mode, you can move nodes and
      edges with the mouse, edit their properties and perform other editing
      operations using the toolbar buttons.</p>

    <h4><a name="Selection_Feedback"></a>Selection Feedback</h4>

    <p>In the demo, the name of the selected object is displayed in the
      selection display area at the bottom. In an application, a custom handling
      can be performed when an object is selected or unselected.</p>

    <h4><a name="Prompt_Area"></a>Prompt Area</h4>

    <p>Prompts and error messages are displayed in the message area at
      the bottom of the diagram. The errors are also displayed in an alert
      dialog and logged to the broser console.</p>

    <h4><a name="Properties_Editing_and_Attaching_Custom_Data"></a>
      Properties Editing and Attaching Custom Data</h4>

    <p>The <i>Properties</i> toolbar button may be used to popup the
      <i>Properties Dialog</i> for the selected object. In this demo,
      the dialog is used for editing custom data properties associated with
      the object, but the graphical properties (such as colors, etc.) may be
      edited the same way using either a color palette or a text box.
      The custom data are attached to the object: they are saved when the
      diagram is saved and restored when the saved diagram is loaded.</p>

    <h4><a name="Attaching_Data_Sources"></a>Attaching Data Sources for
      Real-Time Updates</h4>

    <p>The <i>Data Source</i> text box of the Properties dialog may be used
      to define the data source of live data to update the graphical icon
      in the drawing. For example, a data source providing a tank level
      may be associated with a tank object to display changing data from
      a live data source. The objects in the diagram may be updated with
      live data while they are being edited.</p>

    <p>The <i>Select</i> button next to the <i>Data Source</i> text box
      of the <i>Properties Dialog</i> brings the list of available
      data sources to choose from. In an application, the list of the
      data sources may be queried from a process database or a PLC.
    </p>

    <h4><a name="Cut_and_Paste"></a>Cut and Paste</h4>

    <p>The <i>Cut</i> toolbar button may be used to delete a node or link,
      and the <i>Paste</i> button may be used to undo the Cut action.</p>
    
    <h4><a name="Zooming_Scrolling_and_ZoomTo_Features"></a>
      Zooming, Scrolling and ZoomTo Features</h4>

    <ul>
      <li>The <i>ZoomIn</i> and <i>ZoomOut</i> buttons may be used to zoom
        the drawing.</li>

      <li>The <i>1:1</i> button restores initial zooming.</li>

      <li>To zoom to an area, press the <i>ZoomTo</i> button, then select a 
        rectangle to zoom to (click, drag, then release the mouse).</li>
      
      <li>Scrollbars on the side of the drawing may be used for scrolling.</li>
    </ul>

    <h4><a name="Tooltips"></a> Integrated Tooltips</h4>

    <p>Hover a mouse over any button to display a tooltip. On mobile devices,
      touch and hold a button to display its description.</p>
    
    <h4><a name="Saving_the_Diagram"></a>Saving the Diagram</h4>
    
    <p>The <i>Save</i> toolbar button demonstrates saving the created
      diagram as a JSON string. This string can be sent to a server for
      persistent storage. The JSON string is also printed to the console
      for information and debugging.</p>

    <h4><a name="Loading_a_Diagram"></a>Loading a Previously Saved Drawing</h4>
    
    <p>The <i>Load</i> toolbar button loads a previously saved diagram.
      In the demo, it loads a diagram from the JSON string generated by the
      Save action. In an application, the JSON string containing a previously
      saved diagram can be loaded from a server.</p>
      
    <h4><a name="Printing"></a>Printing</h4>
      
    <p>The <i>Print</i> toolbar button can be used to print the diagram web
      page using the browser's native print dialog.<p>
      
  </body>
</html>
